{% extends 'base.html.twig' %}
{% form_theme form 'form/bootstrap_3_layout.html.twig' %}


{% block content %}
    <div class="card">
        <div class="header" style="text-align: center;">
            <h1>
                {{ challenge.name }}
            </h1>
            <h3><span class="label bg-cyan">Récompense : {{ challenge.reward }}</span></h3>
            <h3 data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Difficulté">
                {% for i in 1..challenge.difficulty  %} <i class="fas fa-star"></i> {% endfor %}
                {% if challenge.difficulty != 5 %}
                    {% for i in 1..(5-challenge.difficulty)  %} <i class="far fa-star" ></i> {% endfor %}
                {% endif %}
            </h3>
            Par {{ challenge.createdBy.username }}<br/>

        </div>
        <div class="body">
            <div class="alert bg-cyan">
                {{ challenge.description|raw }}
            </div>

            {% if is_granted('HAS_VALIDATED', challenge) %}
                <div class="body align-center">
                    <h3>
                        Tu a déjà validé ce challenge !
                    </h3>
                </div>
            {% else %}
                {{ form_start(form) }}
                    <div class="body align-center">
                        <h3>Faire une tentative</h3>
                        {{ form_row(form.password, {'label':'Mot de passe'}) }}
                    </div>
                    <div class="card-footer align-center">
                        <button type="submit" class="btn bg-light-green waves-effect btn-card-footer">
                            Essayer !</button>
                    </div>
                {{ form_end(form) }}
            {% endif %}
            <div class="label bg-light-green">
                {% if lastValidation %}
                    Dernière validation par {{ lastValidation.createdBy.username }}, le {{ lastValidation.validatedOn|date('j/m/Y à h:i') }}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
